"use strict";(self.webpackChunkbywater_blog=self.webpackChunkbywater_blog||[]).push([[8410],{3905:(e,t,r)=>{r.d(t,{Zo:()=>u,kt:()=>m});var n=r(7294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var c=n.createContext({}),p=function(e){var t=n.useContext(c),r=t;return e&&(r="function"==typeof e?e(t):o(o({},t),e)),r},u=function(e){var t=p(e.components);return n.createElement(c.Provider,{value:t},e.children)},s={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},f=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,i=e.originalType,c=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),f=p(r),m=a,d=f["".concat(c,".").concat(m)]||f[m]||s[m]||i;return r?n.createElement(d,o(o({ref:t},u),{},{components:r})):n.createElement(d,o({ref:t},u))}));function m(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=r.length,o=new Array(i);o[0]=f;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:a,o[1]=l;for(var p=2;p<i;p++)o[p]=r[p];return n.createElement.apply(null,o)}return n.createElement.apply(null,r)}f.displayName="MDXCreateElement"},8619:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>s,frontMatter:()=>i,metadata:()=>l,toc:()=>p});var n=r(7462),a=(r(7294),r(3905));const i={sidebar_position:13},o="[\u9435\u4eba\u8cfd 2022-\u64ca\u6557\u524d\u7aef\u9762\u8a66\u5927\u4f5c\u6230] React Reconciliation",l={unversionedId:"ironMan2022/react_reconciliation",id:"ironMan2022/react_reconciliation",title:"[\u9435\u4eba\u8cfd 2022-\u64ca\u6557\u524d\u7aef\u9762\u8a66\u5927\u4f5c\u6230] React Reconciliation",description:"\u4eca\u5929\u6211\u5011\u8981\u4f86\u5ef6\u7e8c\u6628\u5929\u7684\u63d0\u5230\u7684 DOM \u70ba\u4eba\u8a6c\u75c5\u7684\u6548\u80fd\u554f\u984c\uff0c\u4f86\u8a0e\u8ad6 React \u662f\u5982\u4f55\u900f\u904e reconciliation \u4f86\u89e3\u6c7a\u9019\u500b\u554f\u984c\u7684\uff01\u6211\u5011\u90fd\u77e5\u9053 DOM \u5728\u64cd\u4f5c\u6642\u6703\u5c0d\u6548\u80fd\u9020\u6210\u5f88\u5927\u7684\u5f71\u97ff\uff0c\u4f46\u66f4\u7cbe\u78ba\u7684\u8aaa\u6cd5\uff0c\u61c9\u8a72\u662f DOM \u64cd\u4f5c\u6240\u5f15\u767c\u7684 reflow \u548c repaint \u662f\u975e\u5e38\u8017\u6548\u80fd\u7684\u3002 \u5be6\u969b\u7684\u4ecb\u7d39\u6211\u5728\u6211\u7684\u7b46\u8a18\u88e1\u9762\u6709\u63d0\u904e\uff0c\u6709\u8208\u8da3\u7684\u53ef\u4ee5\u53bb\u770b\u770b\uff01\u9019\u7bc7\u6211\u5011\u6703 focus \u5728 React \u7684\u90e8\u5206\u3002\u90a3\u9996\u5148\uff0c\u6211\u5011\u8981\u5148\u4f86\u4e86\u89e3\u4ec0\u9ebc\u662fVirtual DOM\uff01",source:"@site/docs/ironMan2022/react_reconciliation.md",sourceDirName:"ironMan2022",slug:"/ironMan2022/react_reconciliation",permalink:"/bywater-blog/ironMan2022/react_reconciliation",draft:!1,tags:[],version:"current",sidebarPosition:13,frontMatter:{sidebar_position:13},sidebar:"tutorialSidebar",previous:{title:"[\u9435\u4eba\u8cfd 2022-\u64ca\u6557\u524d\u7aef\u9762\u8a66\u5927\u4f5c\u6230] React",permalink:"/bywater-blog/ironMan2022/day12_react"},next:{title:"[\u9435\u4eba\u8cfd 2022-\u64ca\u6557\u524d\u7aef\u9762\u8a66\u5927\u4f5c\u6230] React Hooks",permalink:"/bywater-blog/ironMan2022/react_hooks"}},c={},p=[{value:"\u4ec0\u9ebc\u662f Virtual DOM?",id:"\u4ec0\u9ebc\u662f-virtual-dom",level:3},{value:"\u4ec0\u9ebc\u662f diffing \u6f14\u7b97\u6cd5\uff1f",id:"\u4ec0\u9ebc\u662f-diffing-\u6f14\u7b97\u6cd5",level:3},{value:"\u4ec0\u9ebc\u662f React reconciliation",id:"\u4ec0\u9ebc\u662f-react-reconciliation",level:3},{value:"\u5e38\u898b\u9762\u8a66\u984c",id:"\u5e38\u898b\u9762\u8a66\u984c",level:3}],u={toc:p};function s(e){let{components:t,...r}=e;return(0,a.kt)("wrapper",(0,n.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"\u9435\u4eba\u8cfd-2022-\u64ca\u6557\u524d\u7aef\u9762\u8a66\u5927\u4f5c\u6230-react-reconciliation"},"[\u9435\u4eba\u8cfd 2022-\u64ca\u6557\u524d\u7aef\u9762\u8a66\u5927\u4f5c\u6230]"," React Reconciliation"),(0,a.kt)("p",null,"\u4eca\u5929\u6211\u5011\u8981\u4f86\u5ef6\u7e8c\u6628\u5929\u7684\u63d0\u5230\u7684 DOM \u70ba\u4eba\u8a6c\u75c5\u7684\u6548\u80fd\u554f\u984c\uff0c\u4f86\u8a0e\u8ad6 React \u662f\u5982\u4f55\u900f\u904e reconciliation \u4f86\u89e3\u6c7a\u9019\u500b\u554f\u984c\u7684\uff01\u6211\u5011\u90fd\u77e5\u9053 DOM \u5728\u64cd\u4f5c\u6642\u6703\u5c0d\u6548\u80fd\u9020\u6210\u5f88\u5927\u7684\u5f71\u97ff\uff0c\u4f46\u66f4\u7cbe\u78ba\u7684\u8aaa\u6cd5\uff0c\u61c9\u8a72\u662f DOM \u64cd\u4f5c\u6240\u5f15\u767c\u7684 reflow \u548c repaint \u662f\u975e\u5e38\u8017\u6548\u80fd\u7684\u3002 \u5be6\u969b\u7684\u4ecb\u7d39\u6211\u5728\u6211\u7684",(0,a.kt)("a",{parentName:"p",href:"https://0529bill.github.io/bywater-blog/Javascript/DOM"},"\u7b46\u8a18"),"\u88e1\u9762\u6709\u63d0\u904e\uff0c\u6709\u8208\u8da3\u7684\u53ef\u4ee5\u53bb\u770b\u770b\uff01\u9019\u7bc7\u6211\u5011\u6703 focus \u5728 React \u7684\u90e8\u5206\u3002\u90a3\u9996\u5148\uff0c\u6211\u5011\u8981\u5148\u4f86\u4e86\u89e3\u4ec0\u9ebc\u662f",(0,a.kt)("strong",{parentName:"p"},"Virtual DOM"),"\uff01"),(0,a.kt)("h3",{id:"\u4ec0\u9ebc\u662f-virtual-dom"},"\u4ec0\u9ebc\u662f Virtual DOM?"),(0,a.kt)("p",null,"Virtual DOM \u662f React \u6240\u5efa\u7acb\u7684\u4e00\u500b\u865b\u64ec\u7684 DOM tree\uff0c\u900f\u904e\u7269\u4ef6\u7684\u683c\u5f0f\u4f86\u63cf\u8ff0 DOM \u7684\u7d50\u69cb\u4e26\u5132\u5b58\u5728\u5167\u5b58\u88e1\u3002\u7576 Virtual DOM \u66f4\u52d5\u6642\uff0c\u4e0d\u76f4\u63a5\u4fee\u6539 DOM\uff0c\u800c\u662f\u5148\u900f\u904e diff \u6f14\u7b97\u6cd5\u6bd4\u8f03 Virtual DOM \u4fee\u6539\u524d\u8207\u4fee\u6539\u5f8c\u7684\u6a39\u72c0\u7d50\u69cb\uff0c\u7136\u5f8c\u6279\u6b21\u66f4\u65b0\u771f\u5be6 DOM \u4e2d\u7684\u7bc0\u9ede\uff0c\u4f86\u9054\u5230\u5169\u500b\u512a\u52e2\uff0c"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u6e1b\u5c11 DOM \u7684\u8b8a\u52d5\uff0c\u907f\u514d\u4e0d\u5fc5\u8981\u7684 reflow \u6216 repaint\u3002"),(0,a.kt)("li",{parentName:"ol"},"Virtual DOM \u7684\u8b8a\u52d5\u6bd4 DOM \u7684\u8b8a\u52d5\u9084\u8981\u6709\u6548\u7387\uff0c\u56e0\u70ba\u5b83\u4e0d\u7528\u505a\u986f\u793a\u5728\u87a2\u5e55\u4e0a\u7684\u52d5\u4f5c\u3002")),(0,a.kt)("p",null,"\u6240\u4ee5\u5b8c\u6574\u7684 Virtual DOM \u986f\u793a\u7684\u904e\u7a0b\u6703\u662f\u9019\u6a23\u7684\uff0c"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"JSX \u88ab render"),(0,a.kt)("li",{parentName:"ol"},"\u63a5\u8457 Virtual DOM \u6703\u88ab\u66f4\u65b0"),(0,a.kt)("li",{parentName:"ol"},"\u7136\u5f8c React \u6703\u53bb\u6bd4\u8f03\u66f4\u65b0\u524d\u7684 Virtual DOM \u8ddf\u66f4\u65b0\u5f8c\u7684 Virtual DOM"),(0,a.kt)("li",{parentName:"ol"},"\u518d\u4f86 React \u6703\u53bb\u505a\u4e00\u500b\u53eb\u505a'diffing\u2019\u7684\u52d5\u4f5c\uff0c\u4e5f\u5c31\u662f\u53bb\u627e\u51fa\u78ba\u5207 Virtual DOM \u54ea\u88e1\u88ab\u66f4\u65b0\u4e86"),(0,a.kt)("li",{parentName:"ol"},"\u5728\u77e5\u9053\u54ea\u88e1\u88ab\u66f4\u65b0\u5f8c\uff0cReact \u53ea\u6703\u53bb DOM \u66f4\u65b0\u9700\u8981\u88ab\u66f4\u65b0\u7684\u5730\u65b9\u3002")),(0,a.kt)("p",null,"virtual DOM \u7f3a\u9ede\uff1a",(0,a.kt)("br",{parentName:"p"}),"\n","\u9996\u6b21\u6e32\u67d3\u5927\u91cf DOM \u6642\uff0c\u7531\u65bc\u591a\u4e86\u4e00\u5c64\u865b\u64ec DOM \u7684\u8a08\u7b97\uff0c\u6703\u6bd4 innerHTML \u63d2\u5165\u6162\u3002"),(0,a.kt)("p",null,"virtual DOM \u67b6\u69cb\u5be6\u73fe\uff1a",(0,a.kt)("br",{parentName:"p"}),"\n",(0,a.kt)("a",{parentName:"p",href:"https://tsejx.github.io/react-guidebook/infrastructure/old/virtual-dom/"},"https://tsejx.github.io/react-guidebook/infrastructure/old/virtual-dom/")),(0,a.kt)("p",null,"\u4f60\u770b\u5230\u9019\u88e1\uff0c\u4f60\u53ef\u80fd\u6703\u958b\u59cb\u597d\u5947\u4e86\uff0c\u4ec0\u9ebc\u662f diffing \u6f14\u7b97\u6cd5\u5462\uff1f"),(0,a.kt)("h3",{id:"\u4ec0\u9ebc\u662f-diffing-\u6f14\u7b97\u6cd5"},"\u4ec0\u9ebc\u662f diffing \u6f14\u7b97\u6cd5\uff1f"),(0,a.kt)("p",null,"diffing \u6f14\u7b97\u6cd5\u7528\u65bc\u6bd4\u5c0d\u5169\u9846 Virtual DOM \u4e4b\u9593\u7684\u5dee\u5225\uff0c\u4f86\u627e\u51fa\u8b8a\u52d5\u7684\u5730\u65b9\u3002\u4ed6\u5728\u57f7\u884c\u6642\uff0c\u6709\u5e7e\u500b\u91cd\u9ede\uff1a"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u6bd4\u5c0d\u4e0d\u540c\u985e\u578b\u7684 root Element \u6642\uff0c\u6703\u91cd\u5efa\u65b0\u7684 DOM tree")),(0,a.kt)("p",null,"\u50cf\u662f\u4ee5\u4e0b\u7684\u5169\u500b DOM tree\uff0croot element \u5f9e",(0,a.kt)("inlineCode",{parentName:"p"},"div"),"\u8b8a\u6210",(0,a.kt)("inlineCode",{parentName:"p"},"span"),"\uff0c\u9019\u6642\u5c31\u7b97\u4e2d\u9593\u7684 component \u662f\u4e00\u6a23\u7684\uff0c\u4f46\u9084\u662f\u6703\u88ab\u92b7\u6bc0\uff0c\u7136\u5f8c\u91cd\u65b0\u5efa\u7acb\u4e00\u500b DOM tree"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"// \u820atree\n<div>\n  <Counter />\n</div>\n\n\n\n//\u65b0tree\n<span>\n  <Counter />\n</span>\n\n\n")),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},"\u540c\u985e\u578b\u7684 DOM element\uff0c\u53ea\u6703\u66f4\u52d5 attribute")),(0,a.kt)("p",null,"\u7576\u6bd4\u5c0d\u4ee5\u4e0b\u5169\u500b DOM tree \u6642\uff0c\u56e0\u70ba\u4ed6\u5011\u7684 root element \u4e00\u6a23\uff0c\u9019\u6642\u5019\u5c31\u53ea\u8981\u66f4\u65b0\u6709\u8b8a\u52d5\u7684 attribute!"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'// \u820atree\n<div className="before" title="stuff" />\n\n\n//\u65b0tree\n<div className="after" title="stuff" />\n\n')),(0,a.kt)("p",null,"\u9019\u88e1\u7c21\u55ae\u8b1b\u4e86\u5169\u500b diffing \u6bd4\u8f03\u7684\u91cd\u9ede\uff0c\u66f4\u591a\u7684\u7d30\u7bc0\u53ef\u4ee5\u5728\u9019\u88e1\u770b\u5230\uff5e ",(0,a.kt)("a",{parentName:"p",href:"https://zh-hant.reactjs.org/docs/reconciliation.html"},"react docs")),(0,a.kt)("p",null,"\u5728\u4e86\u89e3 Virtual-DOM \u548c diffing \u6f14\u7b97\u6cd5\uff0c\u6211\u5011\u4f86\u7e3d\u7d50\u4e00\u4e0b\uff0creact \u900f\u904e diffing \u6f14\u7b97\u6cd5 \u66f4\u65b0 Virtual-DOM \u548c DOM \u4f86\u89e3\u6c7a DOM \u7684\u8b8a\u52d5\u5f88\u8017\u80fd\u7684\u554f\u984c\u3002\u800c\u9019\u500b\u904e\u7a0b\uff0c\u5c31\u53eb\u505a reconciliation\u3002\u5230\u9019\u88e1\uff0c\u6211\u5011\u7d42\u65bc\u77e5\u9053 React \u70ba\u4ec0\u9ebc\u53ef\u4ee5\u5982\u6b64\u6709\u6548\u7387\u8ddf\u5feb\u901f\u4e86\uff01\u4e0b\u4e00\u7bc7\u6211\u5011\u6703\u958b\u59cb\u8b1b\u5be6\u969b\u61c9\u7528\u5230\u7684\u5c64\u9762\uff0chooks\u3002"),(0,a.kt)("h3",{id:"\u4ec0\u9ebc\u662f-react-reconciliation"},"\u4ec0\u9ebc\u662f React reconciliation"),(0,a.kt)("p",null,":reconciliation \u6307\u7684\u662f react \u66f4\u65b0 Virtual-DOM \u548c DOM \u7684\u904e\u7a0b\uff0c\u900f\u904e\u53ea\u66f4\u65b0\u6709\u66f4\u52d5\u7684\u90e8\u5206\uff0c\u8b93 React \u53ef\u4ee5\u6bd4\u64cd\u4f5c\u539f\u751f DOM \u66f4\u7701\u6548\u80fd\u8ddf\u5feb\u901f\u3002"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://www.geeksforgeeks.org/reactjs-reconciliation/"},"https://www.geeksforgeeks.org/reactjs-reconciliation/")),(0,a.kt)("h3",{id:"\u5e38\u898b\u9762\u8a66\u984c"},"\u5e38\u898b\u9762\u8a66\u984c"),(0,a.kt)("p",null,"\u9762\u8a66\u984c 1. \u4ec0\u9ebc\u662f reconciliation?\n\u9762\u8a66\u984c 2. \u4ec0\u9ebc\u662f Virtual-DOM?\n\u9762\u8a66\u984c 1. \u4ec0\u9ebc\u662f diffing \u6f14\u7b97\u6cd5?"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://segmentfault.com/a/1190000039682751"},"https://segmentfault.com/a/1190000039682751"),"\n",(0,a.kt)("a",{parentName:"p",href:"https://tw.alphacamp.co/blog/dom-and-virtual-dom"},"https://tw.alphacamp.co/blog/dom-and-virtual-dom"),"\n",(0,a.kt)("a",{parentName:"p",href:"https://cloud.tencent.com/developer/article/1882296"},"https://cloud.tencent.com/developer/article/1882296"),(0,a.kt)("br",{parentName:"p"}),"\n",(0,a.kt)("a",{parentName:"p",href:"https://tech-blog.cymetrics.io/posts/mingyou/deep-dive-into-react-fiber/"},"https://tech-blog.cymetrics.io/posts/mingyou/deep-dive-into-react-fiber/")))}s.isMDXComponent=!0}}]);