"use strict";(self.webpackChunkbywater_blog=self.webpackChunkbywater_blog||[]).push([[1961],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>h});var i=a(7294);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,i,l=function(e,t){if(null==e)return{};var a,i,l={},n=Object.keys(e);for(i=0;i<n.length;i++)a=n[i],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(i=0;i<n.length;i++)a=n[i],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}var p=i.createContext({}),s=function(e){var t=i.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):r(r({},t),e)),a},c=function(e){var t=s(e.components);return i.createElement(p.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},m=i.forwardRef((function(e,t){var a=e.components,l=e.mdxType,n=e.originalType,p=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),m=s(a),h=l,d=m["".concat(p,".").concat(h)]||m[h]||u[h]||n;return a?i.createElement(d,r(r({ref:t},c),{},{components:a})):i.createElement(d,r({ref:t},c))}));function h(e,t){var a=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var n=a.length,r=new Array(n);r[0]=m;var o={};for(var p in t)hasOwnProperty.call(t,p)&&(o[p]=t[p]);o.originalType=e,o.mdxType="string"==typeof e?e:l,r[1]=o;for(var s=2;s<n;s++)r[s]=a[s];return i.createElement.apply(null,r)}return i.createElement.apply(null,a)}m.displayName="MDXCreateElement"},5554:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>r,default:()=>u,frontMatter:()=>n,metadata:()=>o,toc:()=>s});var i=a(7462),l=(a(7294),a(3905));const n={sidebar_position:21},r="[\u9435\u4eba\u8cfd 2022-\u64ca\u6557\u524d\u7aef\u9762\u8a66\u5927\u4f5c\u6230] Core Web Vital and lighthouse",o={unversionedId:"ironMan2022/coreWebVital",id:"ironMan2022/coreWebVital",title:"[\u9435\u4eba\u8cfd 2022-\u64ca\u6557\u524d\u7aef\u9762\u8a66\u5927\u4f5c\u6230] Core Web Vital and lighthouse",description:"\u4eca\u5929\u662f\u512a\u5316\u7cfb\u5217\u7684\u7b2c\u4e00\u7bc7\uff0c\u4eca\u5929\u6211\u5011\u6703\u8b1b\u5982\u4f55\u53bb\u8861\u91cf\u7db2\u9801\u7684\u6548\u80fd\uff0c\u6bcf\u500b\u7db2\u9801\u4f7f\u7528\u8005\u7684\u4f7f\u7528\u88dd\u7f6e\u3001\u7db2\u8def\u74b0\u5883\u7684\u7b49\u7b49\u90fd\u4e0d\u540c\uff0c\u90a3\u6211\u5011\u8981\u600e\u9ebc\u53bb\u8861\u91cf\u7db2\u9801\u6548\u80fd\u7684\u597d\u58de\u5462\uff1f\u4e0b\u9762\u6211\u5011\u6703\u4ecb\u7d39\u6a6b\u5217\u7db2\u9801\u6548\u80fd\u7684\u65b9\u6cd5\uff1a",source:"@site/docs/ironMan2022/coreWebVital.md",sourceDirName:"ironMan2022",slug:"/ironMan2022/coreWebVital",permalink:"/bywater-blog/ironMan2022/coreWebVital",draft:!1,tags:[],version:"current",sidebarPosition:21,frontMatter:{sidebar_position:21},sidebar:"tutorialSidebar",previous:{title:"[\u9435\u4eba\u8cfd 2022-\u64ca\u6557\u524d\u7aef\u9762\u8a66\u5927\u4f5c\u6230] client optimization",permalink:"/bywater-blog/ironMan2022/day20_clientOptimization"},next:{title:"[\u9435\u4eba\u8cfd 2022-\u64ca\u6557\u524d\u7aef\u9762\u8a66\u5927\u4f5c\u6230] Image ant text optimization",permalink:"/bywater-blog/ironMan2022/ImageOptimization"}},p={},s=[{value:"\u4ec0\u9ebc\u662f core web vital?",id:"\u4ec0\u9ebc\u662f-core-web-vital",level:2},{value:"\u600e\u9ebc\u8a08\u7b97 core web vital?",id:"\u600e\u9ebc\u8a08\u7b97-core-web-vital",level:2},{value:"metrics \u7a2e\u985e",id:"metrics-\u7a2e\u985e",level:2},{value:"Core Web Vital",id:"core-web-vital",level:2},{value:"Largest Contentful Paint(LCP)",id:"largest-contentful-paintlcp",level:2},{value:"\u4ec0\u9ebc\u662f LCP?",id:"\u4ec0\u9ebc\u662f-lcp",level:4},{value:"LCP \u512a\u5316\u65b9\u6cd5",id:"lcp-\u512a\u5316\u65b9\u6cd5",level:4},{value:"First Input Delay (FID)",id:"first-input-delay-fid",level:3},{value:"\u4ec0\u9ebc\u662f First Input Delay (FID)",id:"\u4ec0\u9ebc\u662f-first-input-delay-fid",level:3},{value:"FID \u512a\u5316\u65b9\u6cd5",id:"fid-\u512a\u5316\u65b9\u6cd5",level:4},{value:"Cumulative Layout Shift (CLS)",id:"cumulative-layout-shift-cls",level:2},{value:"\u4ec0\u9ebc\u662f Cumulative Layout Shift (CLS)",id:"\u4ec0\u9ebc\u662f-cumulative-layout-shift-cls",level:3},{value:"CLS \u512a\u5316\u65b9\u6cd5",id:"cls-\u512a\u5316\u65b9\u6cd5",level:4},{value:"Lighthouse",id:"lighthouse",level:2}],c={toc:s};function u(e){let{components:t,...n}=e;return(0,l.kt)("wrapper",(0,i.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"\u9435\u4eba\u8cfd-2022-\u64ca\u6557\u524d\u7aef\u9762\u8a66\u5927\u4f5c\u6230-core-web-vital-and-lighthouse"},"[\u9435\u4eba\u8cfd 2022-\u64ca\u6557\u524d\u7aef\u9762\u8a66\u5927\u4f5c\u6230]"," Core Web Vital and lighthouse"),(0,l.kt)("p",null,"\u4eca\u5929\u662f\u512a\u5316\u7cfb\u5217\u7684\u7b2c\u4e00\u7bc7\uff0c\u4eca\u5929\u6211\u5011\u6703\u8b1b",(0,l.kt)("strong",{parentName:"p"},"\u5982\u4f55\u53bb\u8861\u91cf\u7db2\u9801\u7684\u6548\u80fd"),"\uff0c\u6bcf\u500b\u7db2\u9801\u4f7f\u7528\u8005\u7684\u4f7f\u7528\u88dd\u7f6e\u3001\u7db2\u8def\u74b0\u5883\u7684\u7b49\u7b49\u90fd\u4e0d\u540c\uff0c\u90a3\u6211\u5011\u8981\u600e\u9ebc\u53bb\u8861\u91cf\u7db2\u9801\u6548\u80fd\u7684\u597d\u58de\u5462\uff1f\u4e0b\u9762\u6211\u5011\u6703\u4ecb\u7d39\u6a6b\u5217\u7db2\u9801\u6548\u80fd\u7684\u65b9\u6cd5\uff1a"),(0,l.kt)("h2",{id:"\u4ec0\u9ebc\u662f-core-web-vital"},"\u4ec0\u9ebc\u662f core web vital?"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"CWV",src:a(5639).Z,width:"1280",height:"735"}),"\nweb vital \u662f Google \u5728 2021 \u5e74\u6240\u63a8\u51fa\u7684\u8861\u91cf\u7db2\u7ad9\u7684\u6307\u6a19\uff0c\u4e26\u4e14\u9019\u500b\u6307\u6a19\u6703\u76f4\u63a5\u5f71\u97ff\u5230 SEO \u8ddf\u7db2\u7ad9\u9806\u5e8f ranking!!\u800c core web vital \u662f web vital \u4e2d\u6700\u91cd\u8981\u7684\u4e09\u500b\u6307\u6a19\uff0c\u5206\u5225\u662f Largest Contentful Paint(LCP), First Input Delay(FID)\u548c Cumulative Layout Shift(CLS)\u3002\u5168\u90e8\u7684 web vital \u53ef\u4ee5\u5728",(0,l.kt)("a",{parentName:"p",href:"https://web.dev/metrics/"},"\u9019\u88e1\u770b")),(0,l.kt)("h2",{id:"\u600e\u9ebc\u8a08\u7b97-core-web-vital"},"\u600e\u9ebc\u8a08\u7b97 core web vital?"),(0,l.kt)("p",null,"core web vital \u7684\u6e2c\u8a66\u65b9\u5f0f\u4f9d\u6e2c\u8a66\u74b0\u5883\u53ef\u4ee5\u5206\u70ba\u5169\u7a2e\uff0c\u7b2c\u4e00\u7a2e\u662f\u5728\u975e production \u74b0\u5883\u4e2d\u6240\u505a\u7684\u6e2c\u8a66\u4f86\u6a21\u64ec\u4f7f\u7528\u8005\u7684\u4f7f\u7528\u60c5\u5f62\uff0c\u5b98\u7db2\u7a31\u4e4b\u70ba in the lab\u3002In the lab \u6e2c\u8a66\u9069\u5408\u7528\u5728",(0,l.kt)("strong",{parentName:"p"},"\u6e2c\u8a66\u65b0\u529f\u80fd\u662f\u5426\u9020\u6210\u6574\u9ad4\u7db2\u9801\u7684\u6548\u80fd\u964d\u4f4e"),"\uff0c\u4f46\u7f3a\u9ede\u5247\u662f",(0,l.kt)("strong",{parentName:"p"},"\u7121\u6cd5\u5b8c\u6574\u7684\u5c55\u73fe\u5be6\u969b\u4f7f\u7528\u8005\u5728\u64cd\u4f5c\u7db2\u9801\u6642\u6240\u7522\u751f\u7684\u60c5\u6cc1"),"\u3002",(0,l.kt)("br",{parentName:"p"}),"\n","\u7b2c\u4e8c\u7a2e\u6e2c\u8a66\u65b9\u5f0f\u5247\u662f\u5be6\u969b\u4f7f\u7528\u8005\u5728\u64cd\u4f5c\u9801\u9762\u6642\uff0c\u6240\u7522\u751f\u7684\u6e2c\u8a66\u6578\u64da\uff0c\u5b98\u7db2\u7a31\u4e4b\u70ba in the field\uff0c\u9019\u7a2e\u6e2c\u91cf\u7684\u65b9\u5f0f\u53ef\u4ee5",(0,l.kt)("strong",{parentName:"p"},"\u6e96\u78ba\u7684\u5075\u6e2c\u5230\u4f7f\u7528\u8005\u5728\u64cd\u4f5c\u6642\u6240\u7522\u751f\u7684\u6578\u64da\uff01"),"\u90a3\u8981\u4f7f\u7528\u7528\u54ea\u4e9b\u5de5\u5177\u4f86\u6e2c\u91cf\u9019\u5169\u7a2e\u74b0\u5883\u5462\uff1f"),(0,l.kt)("p",null,"\u7528\u4f86\u505a in the field \u6e2c\u91cf\u7684\u5de5\u5177\uff1a",(0,l.kt)("br",{parentName:"p"}),"\n",(0,l.kt)("img",{alt:"fieldTool",src:a(9738).Z,width:"1826",height:"526"})),(0,l.kt)("p",null,"\u6216\u662f\u4f60\u4e5f\u53ef\u4ee5\u900f\u904e google \u505a\u7684",(0,l.kt)("a",{parentName:"p",href:"https://github.com/GoogleChrome/web-vitals"},"\u5957\u4ef6"),"\u4f86\u5728 JS \u4f86\u6e2c\u91cf\u4f60\u7684 core web vital\u3002"),(0,l.kt)("p",null,"\u7528\u4f86\u505a in the lab \u6e2c\u91cf\u7684\u5de5\u5177:\n",(0,l.kt)("img",{alt:"labTool",src:a(812).Z,width:"1826",height:"374"})),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u6ce8\u610f:\u56e0\u70ba\u662f\u6a21\u64ec\u4f7f\u7528\u8005\u7684\u4f7f\u7528\u60c5\u5f62\uff0c\u6240\u4ee5\u4e0d\u6703\u6709 FID\uff0cgoogle chrome \u5728\u9019\u88e1\u7528 TBT(Total blocking time)\u4f86\u4ee3\u66ff")),(0,l.kt)("h2",{id:"metrics-\u7a2e\u985e"},"metrics \u7a2e\u985e"),(0,l.kt)("p",null,"web vitals \u5168\u90e8\u53ef\u4ee5\u5206\u6210\u4e94\u5927\u985e\uff1a"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Perceived load speed: \u7db2\u7ad9\u53ef\u4ee5\u591a\u5feb\u7684 load \u7136\u5f8c render \u51fa\u756b\u9762"),(0,l.kt)("li",{parentName:"ol"},"Load responsiveness: \u7db2\u7ad9\u53ef\u4ee5\u591a\u5feb\u7684\u8dd1\u5b8c JS \u4f86\u63a5\u6536\u4f7f\u7528\u8005\u64cd\u4f5c\u7684\u6307\u4ee4"),(0,l.kt)("li",{parentName:"ol"},"Runtime responsiveness: \u5728\u7db2\u7ad9\u8dd1\u5b8c\u4e4b\u5f8c\uff0c\u7db2\u7ad9\u591a\u5feb\u53ef\u4ee5\u5c0d\u4f7f\u7528\u8005\u64cd\u4f5c\u9032\u884c\u53cd\u61c9 ex, click a button"),(0,l.kt)("li",{parentName:"ol"},"Visual stability:\u7db2\u9801\u662f\u4e0d\u662f\u7a69\u5b9a\u7684\uff0c\u6703\u4e0d\u6703\u6709\u5947\u602a\u7684 bug \u51fa\u73fe\uff0c\u6216\u662f\u4e00\u9ede\u9032\u53bb\u9801\u9762\u5c31\u6709\u4e00\u5806\u5ee3\u544a\u6216\u662f\u5716\u7247\u4f86\u5f71\u97ff\u4f7f\u7528\u9ad4\u9a57"),(0,l.kt)("li",{parentName:"ol"},"Smoothness: \u7db2\u9801\u7684\u52d5\u756b\u6216\u662f\u63db\u9801\u662f\u4e0d\u662f\u5728\u7a69\u5b9a\u7684 frame rate")),(0,l.kt)("p",null,"\u4e86\u89e3\u4ec0\u9ebc\u662f Core Web Vital \u8ddf web vital \u7684\u7a2e\u985e\u4e4b\u5f8c\uff0c\u4e0b\u9762\u6211\u5011\u5c31\u4f86\u6b63\u5f0f\u4ecb\u7d39\u4ed6\u5427\uff01"),(0,l.kt)("h2",{id:"core-web-vital"},"Core Web Vital"),(0,l.kt)("h2",{id:"largest-contentful-paintlcp"},"Largest Contentful Paint(LCP)"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"LCP",src:a(5265).Z,width:"1826",height:"374"})),(0,l.kt)("h4",{id:"\u4ec0\u9ebc\u662f-lcp"},"\u4ec0\u9ebc\u662f LCP?"),(0,l.kt)("p",null,"The Largest Contentful Paint (LCP)\u8a08\u7b97\u6700\u5927\u7684 image \u6216\u662f\u6587\u5b57 block \u7684 render \u6642\u9593\u3002\u9019\u9805\u6307\u6a19\u5efa\u8b70\u7684\u6642\u9593\u662f\u4f4e\u65bc 2.5 \u79d2\uff0c\u4e5f\u662f\u4e0a\u9762\u7684\u5716\u9ad8\u65bc 75%\u7684\u7da0\u8272\u5340\u9593\u3002"),(0,l.kt)("p",null,"\u54ea\u4e9b\u5143\u7d20\u6703\u88ab\u7b97\u5728 LCP \u5f97\u7bc4\u570d\u5167\uff1f"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"img")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"image")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"video")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"background-image: url()")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u6ce8\u610f: LCP \u53ea\u6703\u53ea\u8a08\u7b97\u5728 viewport \u88e1\u9762\u770b\u5f97\u5230\u7684\u90e8\u5206\uff0c\u5143\u7d20\u4e0a\u5982\u679c\u6709 overflow \u7b49\u7b49\u5143\u7d20\u6216\u662f\u8d85\u51fa viewport \u5247\u4e0d\u6703\u52a0\u5165\u8a08\u7b97"),"\n\u600e\u9ebc\u8a08\u7b97\uff1f"),(0,l.kt)("p",null,"\u4e0b\u9762\u6211\u5011\u4f86\u770b\u9ede\u5be6\u969b\u7684\u6848\u4f8b\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"LCP_example",src:a(2070).Z,width:"1544",height:"656"})),(0,l.kt)("p",null,"\u7da0\u8272\u7684\u6846\u6846\u5c31\u662f\u7576\u6642\u6700\u5927\u7684\u5143\u7d20\uff0cLCP \u8a08\u7b97\u7684\u5c31\u662f\u6574\u500b\u7db2\u9801\u8996\u7a97\u5167\u6700\u5927\u7684\u5143\u7d20\u5b8c\u6210 render \u7684\u6642\u9593\uff0c\u900f\u904e\u4e0a\u65b9\u7684\u8868\u53ef\u4ee5\u770b\u5230\uff0c\u4e00\u958b\u59cb\u756b\u9762\u4e2d\u6700\u5927\u7684\u5143\u7d20\u662f\u5de6\u4e0a\u89d2\u7684\u6a19\u984c\u7136\u5f8c\u5230\u7b2c\u4e8c\u5f35\u5716\u5c31\u8b8a\u6210\u5927\u6a19\u984c\uff0c\u76f4\u5230\u6700\u5f8c\u4e00\u5f35\u5716\uff0c\u756b\u9762\u4e2d\u6700\u5927\u7684\u5143\u7d20\u8b8a\u6210\u5716\u6a94\u3002\u7531\u6b64\u53ef\u77e5\uff0c\u6700\u5927\u7684\u5143\u7d20\u662f\u6703\u8b8a\u52d5\u7684\uff0c\u96a8\u8457\u6700\u5927\u7684\u5143\u7d20\u96e2\u958b\u756b\u9762\u6216\u662f\u66f4\u5927\u7684\u5143\u7d20\u51fa\u73fe\uff0c\u90fd\u6709\u53ef\u80fd\u5f71\u97ff\u5230\u6700\u5f8c\u7684 LCP\u3002"),(0,l.kt)("h4",{id:"lcp-\u512a\u5316\u65b9\u6cd5"},"LCP \u512a\u5316\u65b9\u6cd5"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u512a\u5316 CSS"),(0,l.kt)("li",{parentName:"ul"},"\u512a\u5316 Image"),(0,l.kt)("li",{parentName:"ul"},"\u512a\u5316 fonts"),(0,l.kt)("li",{parentName:"ul"},"\u512a\u5316 Critical Rendering Path")),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://web.dev/lcp/"},"https://web.dev/lcp/")),(0,l.kt)("p",null,"\u5047\u5982\u6211\u5011\u756b\u9762\u4e2d\u6700\u5927\u7684\u5143\u7d20\uff0c\u4e26\u4e0d\u662f\u6700\u91cd\u8981\u7684\u5143\u7d20\u90a3\u600e\u9ebc\u8fa6\uff1f\u6211\u5011\u8981\u600e\u9ebc\u53bb\u6e2c\u91cf\u756b\u9762\u4e2d\u6700\u91cd\u8981\u7684\u756b\u9762\u7684 render Time?"),(0,l.kt)("p",null,"\u9019\u6642\u5019\u6211\u5011\u5c31\u53ef\u4ee5\u7528 Google \u6240\u63d0\u4f9b\u7684 Element Timing API \u4f86\u5275\u5efa\u4e00\u500b\u81ea\u5df1\u7684 custom metrics \u4e86\uff01\u6211\u5011\u53ef\u4ee5\u7528\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"elementtiming")," attribute \u52a0\u5728\u4f60\u60f3\u6e2c\u91cf\u7684\u5143\u7d20\u4e0a\uff0c\u518d\u52a0\u4e0a PerformanceObserver JS \u53bb\u76e3\u6e2c\uff0c\u9019\u6a23\u6211\u5011\u5c31\u53ef\u4ee5\u77e5\u9053\u76e3\u6e2c\u7684\u5143\u7d20\u6240\u82b1\u8cbb\u7684 render time \u4e86\uff01\n",(0,l.kt)("a",{parentName:"p",href:"https://web.dev/custom-metrics/#element-timing-api"},"https://web.dev/custom-metrics/#element-timing-api")),(0,l.kt)("h3",{id:"first-input-delay-fid"},"First Input Delay (FID)"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"FID_example",src:a(2598).Z,width:"1534",height:"454"})),(0,l.kt)("h3",{id:"\u4ec0\u9ebc\u662f-first-input-delay-fid"},"\u4ec0\u9ebc\u662f First Input Delay (FID)"),(0,l.kt)("p",null,"FID \u8a08\u7b97\u4f7f\u7528\u8005\u8207\u7db2\u9801",(0,l.kt)("strong",{parentName:"p"},"\u9996\u6b21\u4e92\u52d5"),"\u7684",(0,l.kt)("strong",{parentName:"p"},"\u5ef6\u9072\u6642\u9593"),"\uff0c\u4f8b\u5982\u9ede\u64ca\u9023\u7d50\u3001\u6309\u9215\u6216\u6309\u58d3\u9375\u76e4\uff08\u6372\u52d5\u3001\u653e\u5927\u7db2\u9801\u4e0d\u5728\u8a08\u7b97\u7bc4\u570d\u5167\uff09\u7b49\u4e8b\u4ef6\u5f8c\u5f8c\uff0c\u700f\u89bd\u6c23\u5ef6\u9072\u591a\u4e45\u6642\u9593\u624d\u53bb\u8655\u7406\u8a72\u4e8b\u4ef6\u3002"),(0,l.kt)("p",null,"\u9019\u9805\u6307\u6a19\u5efa\u8b70\u7684\u6642\u9593\u662f\u4f4e\u65bc 100ms\uff0c\u4e5f\u662f\u4e0a\u9762\u7684\u5716\u7684\u7da0\u8272\u5340\u9593\u3002\n","*","*","\u6ce8\u610f: \u9019\u9805\u6307\u6a19\u662f\u8a08\u7b97\u4f7f\u7528\u8005\u7684\u4e92\u52d5\u5ef6\u9072\u6642\u9593\uff0c\u6240\u4ee5\u53ea\u6703\u5728 in the field \u6e2c\u91cf\u4e2d\u51fa\u73fe\uff0cin the lab \u6e2c\u91cf(ex, chrome lighthouse)\u4e2d\u7528 TBT(Total blocking time)\u4f86\u53d6\u4ee3\u3002","*","*"),(0,l.kt)("p",null,"\u9020\u6210 FID \u7684\u539f\u56e0\uff0c\u662f\u7576\u700f\u89bd\u5668\u6b63\u5728\u8655\u7406\u5176\u4ed6\u7684\u4e8b\u60c5\uff0c\u50cf\u662f\u89e3\u6790\u4e00\u500b\u5927\u7684 JS \u6a94\u6848/css \u6a94\u6848\uff0c\u56e0\u800c\u9020\u6210\u4e3b\u7dda\u7a0b\u963b\u585e\u800c\u7121\u6cd5\u540c\u6642\u8655\u7406\u4f7f\u7528\u8005\u7684\u8f38\u5165\u7684\u60c5\u6cc1\uff0c\u5e38\u898b\u7684 FID \u50cf\u662f\u9ede\u64ca\u6309\u9215\u4f46\u662f\u5ef6\u9072\u4e86\u4e00\u9663\u5b50\u7db2\u9801\u624d\u53cd\u61c9\u3002"),(0,l.kt)("h4",{id:"fid-\u512a\u5316\u65b9\u6cd5"},"FID \u512a\u5316\u65b9\u6cd5"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u6e1b\u5c11\u5927\u578b JS \u7a0b\u5f0f\u78bc\u7684\u57f7\u884c\u6642\u9593",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u628a\u975e UI \u7684 JS \u5de5\u4f5c\u653e\u5230 web worker\uff0c\u4f86\u6e1b\u5c11\u4e3b\u7dda\u7a0b\u7684\u5de5\u4f5c\u91cf"),(0,l.kt)("li",{parentName:"ul"},"code-splitting"),(0,l.kt)("li",{parentName:"ul"},"async, defer \u4f86\u8655\u7406 JS file \u52a0\u8f09\u9806\u5e8f\uff0cdefer \u6bd4\u8f03\u4e0d\u91cd\u8981\u5f97 JS \u6a94\u6848")))),(0,l.kt)("h2",{id:"cumulative-layout-shift-cls"},"Cumulative Layout Shift (CLS)"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"CLS",src:a(4119).Z,width:"1422",height:"384"})),(0,l.kt)("h3",{id:"\u4ec0\u9ebc\u662f-cumulative-layout-shift-cls"},"\u4ec0\u9ebc\u662f Cumulative Layout Shift (CLS)"),(0,l.kt)("p",null,"CLS \u6307\u6a19\u6307\u7684\u662f\u7db2\u9801\u4e0a\u7684\u5143\u7d20\uff0c\u5305\u542b\u5b57\u9ad4\u3001\u5716\u50cf\u3001\u5f71\u7247\u3001\u8868\u55ae\u6216\u662f\u6309\u9215\u7b49\u6216\u662f\u6392\u7248\u7684\u4e0d\u6b63\u5e38\u79fb\u52d5\uff0cGoogle chrome \u6240\u7d66\u4e88\u7684\u4e00\u500b\u5206\u6578\uff0c\u5206\u6578\u7d04\u4f4e\u8d8a\u597d\uff0c\u4e00\u822c\u4f86\u8aaa\u5efa\u8b70 CLS \u5206\u6578\u5728 0.1 \u4ee5\u4e0b\u3002"),(0,l.kt)("p",null,"\u90a3\u4f60\u6703\u4e0d\u6703\u597d\u5947\uff0cchrome \u662f\u600e\u9ebc\u8a08\u7b97\u51fa CLS \u7684\u503c\u7684\u5462\uff1fChrome \u7684\u65b9\u5f0f\u662f\u900f\u904e ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/WICG/layout-instability"},"Layout Instability API"),"\uff0c\u4f86\u5075\u6e2c\u756b\u9762\u4e2d\u7684\u5143\u7d20\u8b8a\u52d5\uff0c\u4e26\u4e14\u6839\u64da\u8b8a\u52d5\u7684\u7bc4\u570d\u8ddf\u5927\u5c0f\u6e2c\u91cf\u51fa\u4e00\u500b\u53eb\u505a",(0,l.kt)("em",{parentName:"p"},"layout shift score"),"\u7684\u6578\u5b57\uff0c\u6700\u5f8c\u5728\u9801\u9762\u6d3b\u52d5\u6642\u6240\u7522\u751f\u6700\u9ad8\u7684",(0,l.kt)("em",{parentName:"p"},"layout shift score"),"\u5c31\u6703\u662f CLS \u7684\u503c\u3002\u4e0b\u9762\u6211\u5011\u4f86\u7e7c\u7e8c\u53bb\u770b",(0,l.kt)("em",{parentName:"p"},"layout shift score"),"\u7684\u516c\u5f0f\uff0c"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"layout shift score = impact fraction ","*"," distance fraction")),(0,l.kt)("p",null,"\u7b2c\u4e00\u500b\u503c impact fraction\uff0c",(0,l.kt)("strong",{parentName:"p"},"\u8a08\u7b97\u7684\u662f\u6574\u500b\u7db2\u9801\u5143\u7d20\u4e0d\u6b63\u5e38\u79fb\u52d5\u7684\u6574\u9ad4\u7bc4\u570d"),"\uff0c\u5305\u542b\u4e0d\u6b63\u5e38\u79fb\u52d5\u524d\u5230\u79fb\u52d5\u5f8c\u7684\u6574\u9ad4\u7bc4\u570d\u3002\u6211\u5011\u770b\u4e0b\u9762\u7684\u5716\uff0c\u5f9e\u5de6\u624b\u7684\u756b\u9762\u5230\u4e0d\u6b63\u5e38\u79fb\u52d5\u5f8c\u7684\u53f3\u624b\u756b\u9762\u7684\u5b8c\u6574\u7bc4\u570d\uff0c\u4e5f\u5c31\u662f\u4e0b\u9762\u7528\u7d05\u8272\u9ede\u9ede\u5708\u8d77\u4f86\u7684\u7bc4\u570d\uff0c\u5c31\u662f\u6211\u5011\u7684 impact fraction \u7bc4\u570d\uff0c\u4ed6\u5927\u6982\u7ad9\u4e86\u6574\u500b\u756b\u9762\u7684 75 \u8db4\uff0c\u6240\u4ee5\u5728\u9019\u88e1\u6211\u5011\u7684 impact fraction \u5c31\u6703\u662f 0.75\u3002"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"impact_fraction",src:a(9254).Z,width:"1422",height:"1066"})),(0,l.kt)("p",null,"\u4e0b\u4e00\u500b\u6211\u5011\u4f86\u770b\u7b2c\u4e8c\u500b\u503c\uff0cdistance fraction"),(0,l.kt)("p",null,"distance fraction ",(0,l.kt)("strong",{parentName:"p"},"\u8a08\u7b97\u7684\u662f\u7db2\u9801\u5143\u7d20\u4e0d\u6b63\u5e38\u79fb\u52d5\u7684\u8ddd\u96e2"),"\u3002\u6211\u5011\u770b\u4e0b\u9762\u7684\u7167\u7247\uff0c\u88e1\u9762\u7684\u6587\u5b57\u5f9e\u5de6\u908a\u8df3\u5230\u53f3\u908a\uff0c\u4ed6\u5011\u8df3\u52d5\u7684\u8ddd\u96e2\u5c31\u662f\u7d2b\u8272\u7bad\u982d\u7684\u9577\u5ea6\uff0c\u800c\u9019\u500b\u9577\u5ea6\u4e5f\u5c31\u662f distance fraction \u7684\u503c\u3002\u4e0b\u5716\u7684\u7d2b\u8272\u9577\u5ea6\u5927\u6982\u4f54\u4e86\u756b\u9762\u7684\u56db\u5206\u4e4b\u4e00\uff0c\u6240\u4ee5\u6211\u5011\u53ef\u4ee5\u4f30\u8a08\u9019\u88e1\u7684 distance fraction \u662f 0.25"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"distance_fraction",src:a(6836).Z,width:"1432",height:"1104"})),(0,l.kt)("p",null,"\u6700\u5f8c\u6211\u5011\u628a impact fraction \u8ddf distance fraction \u9019\u5169\u8005\u4e58\u8d77\u4f86\u5c31\u6703\u662f\u6211\u5011\u7684 layout shift score",(0,l.kt)("inlineCode",{parentName:"p"},"0.75 * 0.25 = 0.1875"),"\uff01"),(0,l.kt)("h4",{id:"cls-\u512a\u5316\u65b9\u6cd5"},"CLS \u512a\u5316\u65b9\u6cd5"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u4e0d\u53bb\u4fee\u6539 height/weight\uff0c\u7528 css ",(0,l.kt)("inlineCode",{parentName:"li"},"transform:scale()")),(0,l.kt)("li",{parentName:"ul"},"\u5982\u679c\u8981\u79fb\u52d5 element\uff0c\u4e0d\u8981\u76f4\u63a5\u6539",(0,l.kt)("inlineCode",{parentName:"li"},"top"),",",(0,l.kt)("inlineCode",{parentName:"li"},"bottom"),"\u7b49\uff0c\u7528",(0,l.kt)("inlineCode",{parentName:"li"},"transform:translate()")),(0,l.kt)("li",{parentName:"ul"},"img, video, iframe \u53ef\u4ee5\u7684\u8a71\u8a2d\u5b9a aspect ration, \u4e0d\u7136\u5c31\u662f\u7528 width, height \u5c6c\u6027\uff0c\u6216\u662f\u7528 calc()\u4f86\u8a2d\u5b9a\u5927\u5c0f"),(0,l.kt)("li",{parentName:"ul"},"call api \u6642\u8a2d\u5b9a spinner \u4f86\u907f\u514d\u7b49\u5f85 api \u8ddf\u6536\u5230 api \u4e4b\u5f8c\u9020\u6210\u756b\u9762\u79fb\u52d5")),(0,l.kt)("h2",{id:"lighthouse"},"Lighthouse"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"lighthouse",src:a(6324).Z,width:"1600",height:"1067"})),(0,l.kt)("p",null,"light house \u662f google \u6240\u7814\u767c\u7684\u4e00\u500b in the lab \u7684\u512a\u5316\u6e2c\u91cf\u5de5\u5177\u3002\u6211\u5011\u53ef\u4ee5\u900f\u904e Lighthouse \u4f86\u89c0\u6e2c\u4e0a\u9762\u6240\u4ecb\u7d39\u7684 core web vital\uff0c\u9664\u6b64\u4e4b\u5916\uff0clighthouse \u9084\u6703\u76f4\u63a5\u7d66\u8207\u958b\u767c\u8005\u6548\u80fd\u512a\u5316\u7684\u5efa\u8b70\uff0c\u56e0\u6b64 lighthouse \u53ef\u4ee5\u8aaa\u662f\u6240\u4ee5\u958b\u767c\u8005\u5fc5\u5099\u7684\u5de5\u5177\u554a\uff01"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u6ce8\u610f: lighthouse \u662f\u4e00\u500b in the lab \u7684\u6e2c\u8a66\u5de5\u5177\uff0c\u5b83\u53ea\u6703\u8a08\u7b97\u7b2c\u4e00\u6b21 render \u7684\u6027\u80fd\u8868\u73fe\uff0c\u5982\u679c\u8981\u89c0\u6e2c\u9996\u6b21 render \u4e4b\u5f8c\u7684\u6027\u80fd\u8868\u73fe\uff0c\u5c31\u8981\u4f7f\u7528",(0,l.kt)("a",{parentName:"strong",href:"https://web.dev/vitals-measurement-getting-started/#measuring-web-vitals-using-rum-data"},"in the field"),"\u6e2c\u91cf\u5de5\u5177\u4e86\uff01")),(0,l.kt)("p",null,"\u7e3d\u7d50\u4e00\u4e0b\u4eca\u5929\u8b1b\u4e86\u54ea\u4e9b\u6771\u897f\uff0c\u4eca\u5929\u6211\u5011\u5148\u4ecb\u7d39\u4e86\u7db2\u9801\u512a\u5316\u5f88\u91cd\u8981\u7684\u4e09\u500b\u91cd\u8981\u6307\u6a19\uff0cLargest Contentful Paint(LCP), First Input Delay(FID)\u548c Cumulative Layout Shift(CLS)\u8ddf\u512a\u5316\u4ed6\u5011\u7684\u65b9\u6cd5\uff0c\u7136\u5f8c\u6211\u5011\u518d\u63d0\u5230\u524d\u7aef\u512a\u5316\u5fc5\u9808\u53bb\u5b78\u7fd2\u7684\u8d85\u597d\u7528\u5de5\u5177----lighthouse!\u90a3\u6211\u5011\u660e\u5929\u6703\u6ce8\u91cd\u5728\u7167\u7247 image \u7684\u512a\u5316\uff0c\u6211\u5011\u660e\u5929\u898b\u645f\uff01"),(0,l.kt)("hr",null),(0,l.kt)("p",null,"Resources:"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://web.dev/learn-core-web-vitals/"},"https://web.dev/learn-core-web-vitals/"),"\n",(0,l.kt)("a",{parentName:"p",href:"https://www.hububble.co/blog/core-web-vitals"},"https://www.hububble.co/blog/core-web-vitals"),"\n",(0,l.kt)("a",{parentName:"p",href:"https://web.dev/cls/"},"https://web.dev/cls/"),"\n",(0,l.kt)("a",{parentName:"p",href:"https://web.dev/optimize-cls/"},"https://web.dev/optimize-cls/"),"\n",(0,l.kt)("a",{parentName:"p",href:"https://5xruby.tw/posts/seo-core-web-vitals"},"https://5xruby.tw/posts/seo-core-web-vitals"),"\n",(0,l.kt)("a",{parentName:"p",href:"https://blog.logrocket.com/lighthouse-meets-github-actions-use-lighthouse-ci/"},"https://blog.logrocket.com/lighthouse-meets-github-actions-use-lighthouse-ci/")))}u.isMDXComponent=!0},4119:(e,t,a)=>{a.d(t,{Z:()=>i});const i=a.p+"assets/images/CLS-60527712dcd8f16ddace968880482581.png"},5639:(e,t,a)=>{a.d(t,{Z:()=>i});const i=a.p+"assets/images/CWV-ee2b8edd2c7ffcc1cfb82153cff97687.png"},2598:(e,t,a)=>{a.d(t,{Z:()=>i});const i=a.p+"assets/images/FID-0e7214092e54502cca3c44d64215ab17.png"},9254:(e,t,a)=>{a.d(t,{Z:()=>i});const i=a.p+"assets/images/ImpactFraction-8f5255e66885eaa61acaacaf3ac9787d.png"},5265:(e,t,a)=>{a.d(t,{Z:()=>i});const i=a.p+"assets/images/LCP-5b90aa29cb2f6c3de1350da388b63995.png"},2070:(e,t,a)=>{a.d(t,{Z:()=>i});const i=a.p+"assets/images/LCP_example-f97b89424edc0730b45a9dcd0aca0604.png"},6836:(e,t,a)=>{a.d(t,{Z:()=>i});const i=a.p+"assets/images/distanceFraction-34506e8b4f176f9d2e9e73733b87fc43.png"},9738:(e,t,a)=>{a.d(t,{Z:()=>i});const i=a.p+"assets/images/fieldTool-2704f5b11aedf206a7854e74ec5984e5.png"},812:(e,t,a)=>{a.d(t,{Z:()=>i});const i=a.p+"assets/images/labTool-531ddfac1973d5cc6a45eaaf1ef8c36f.png"},6324:(e,t,a)=>{a.d(t,{Z:()=>i});const i=a.p+"assets/images/lighthouse-20bfbd8477745bf50e3cfd01469d20f3.png"}}]);